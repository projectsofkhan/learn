 // MCQ Data for all chapters
        const mcqData = {
            "ch1": {
                title: "Chapter 1: Chemical Reactions and Equations",
                questions: [
                    {
                        question: "Which of the following is a combination reaction?",
                        options: [
                            "2H₂O → 2H₂ + O₂",
                            "CaO + H₂O → Ca(OH)₂",
                            "2FeSO₄ → Fe₂O₃ + SO₂ + SO₃",
                            "2Pb(NO₃)₂ → 2PbO + 4NO₂ + O₂"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "The process of coating iron with zinc to prevent rusting is called:",
                        options: [
                            "Galvanization",
                            "Annealing",
                            "Smelting",
                            "Corrosion"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "What type of reaction is represented by: 2Mg + O₂ → 2MgO?",
                        options: [
                            "Decomposition",
                            "Double Displacement",
                            "Combination",
                            "Displacement"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "In the reaction Pb(s) + CuCl₂(aq) → PbCl₂(aq) + Cu(s):",
                        options: [
                            "Copper is oxidised",
                            "Lead is reduced",
                            "Lead is oxidised",
                            "No redox occurs"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "A substance 'X' is used in whitewashing. It reacts with water to form 'Y'. 'X' and 'Y' are:",
                        options: [
                            "X = CaO, Y = CaCO₃",
                            "X = Ca(OH)₂, Y = CaO",
                            "X = CaO, Y = Ca(OH)₂",
                            "X = CaCO₃, Y = CaO"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "Which gas is evolved when dilute hydrochloric acid reacts with sodium carbonate?",
                        options: [
                            "Chlorine",
                            "Hydrogen",
                            "Carbon dioxide",
                            "Oxygen"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "Rancidity in food is prevented by adding:",
                        options: [
                            "Oxidizing agents",
                            "Reducing agents",
                            "Antacids",
                            "Catalysts"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "The balanced equation for the reaction of barium chloride with sodium sulphate is:",
                        options: [
                            "BaCl₂ + Na₂SO₄ → BaSO₄ + 2NaCl",
                            "BaCl + NaSO₄ → BaSO₄ + NaCl",
                            "BaCl₂ + Na₂SO₄ → Ba₂SO₄ + NaCl",
                            "2BaCl + Na₂SO₄ → Ba₂SO₄ + 2NaCl"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "Which of the following is an endothermic reaction?",
                        options: [
                            "Burning of natural gas",
                            "Respiration",
                            "Decomposition of vegetable matter",
                            "Decomposition of calcium carbonate to quick lime"
                        ],
                        correctAnswer: 3
                    },
                    {
                        question: "In the electrolysis of water, the ratio of hydrogen to oxygen gas volume is:",
                        options: [
                            "1:2",
                            "2:1",
                            "1:1",
                            "8:1"
                        ],
                        correctAnswer: 1
                    }
                ]
            },
            "ch2": {
                title: "Chapter 2: Acids, Bases and Salts",
                questions: [
                    {
                        question: "A solution turns red litmus blue. Its pH is likely to be:",
                        options: ["1", "4", "5", "10"],
                        correctAnswer: 3
                    },
                    {
                        question: "Which one of the following is not a strong acid?",
                        options: [
                            "Hydrochloric acid (HCl)",
                            "Acetic acid (CH₃COOH)",
                            "Sulphuric acid (H₂SO₄)",
                            "Nitric acid (HNO₃)"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "The chemical formula of Plaster of Paris is:",
                        options: [
                            "CaSO₄·2H₂O",
                            "CaSO₄·½H₂O",
                            "CaCl₂·2H₂O",
                            "CaCO₃"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "Tooth enamel is made up of ______ which gets corroded by ______.",
                        options: [
                            "Calcium phosphate, lactic acid",
                            "Calcium carbonate, acetic acid",
                            "Sodium chloride, citric acid",
                            "Potassium nitrate, hydrochloric acid"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "During the preparation of sodium hydroxide, the gas evolved at the anode is:",
                        options: [
                            "Hydrogen",
                            "Oxygen",
                            "Chlorine",
                            "Water vapour"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The pH of a sample of pure water is 7. A few drops of HCl are added to it. What will be its new pH?",
                        options: [
                            "Equal to 7",
                            "Greater than 7",
                            "Less than 7",
                            "Zero"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "A salt formed by the reaction of a weak acid and strong base will give a solution that is:",
                        options: [
                            "Acidic",
                            "Basic",
                            "Neutral",
                            "Amphoteric"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "Which of the following is used as an antacid?",
                        options: [
                            "Sodium hydroxide",
                            "Magnesium hydroxide",
                            "Potassium hydroxide",
                            "Acetic acid"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "Washing soda is:",
                        options: [
                            "NaHCO₃",
                            "Na₂CO₃",
                            "Na₂CO₃·10H₂O",
                            "NaOH"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The process of dissolving an acid or base in water is:",
                        options: [
                            "Always endothermic",
                            "Always exothermic",
                            "Can be exo or endothermic",
                            "A physical change only"
                        ],
                        correctAnswer: 1
                    }
                ]
            },
            "ch6": {
                title: "Chapter 6: Life Processes",
                questions: [
                    {
                        question: "The autotrophic mode of nutrition requires:",
                        options: [
                            "Carbon dioxide and water",
                            "Chlorophyll",
                            "Sunlight",
                            "All of the above"
                        ],
                        correctAnswer: 3
                    },
                    {
                        question: "The opening and closing of stomatal pores is controlled by:",
                        options: [
                            "Xylem",
                            "Phloem",
                            "Guard cells",
                            "Root pressure"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "In human digestive system, bile is secreted by:",
                        options: [
                            "Pancreas",
                            "Liver",
                            "Kidney",
                            "Stomach"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "During respiration, the exchange of gases in the alveoli occurs by:",
                        options: [
                            "Osmosis",
                            "Diffusion",
                            "Active transport",
                            "Phagocytosis"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "Which chamber of the human heart has the thickest muscular wall?",
                        options: [
                            "Right atrium",
                            "Left atrium",
                            "Right ventricle",
                            "Left ventricle"
                        ],
                        correctAnswer: 3
                    },
                    {
                        question: "The filtration units in kidneys are called:",
                        options: [
                            "Ureter",
                            "Urethra",
                            "Neurons",
                            "Nephrons"
                        ],
                        correctAnswer: 3
                    },
                    {
                        question: "Xylem in plants is responsible for the transport of:",
                        options: [
                            "Water and minerals",
                            "Food",
                            "Amino acids",
                            "Oxygen"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "Which enzyme is present in saliva that breaks down starch?",
                        options: [
                            "Trypsin",
                            "Pepsin",
                            "Amylase",
                            "Lipase"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The process of breaking down glucose with the release of energy in the absence of oxygen is called:",
                        options: [
                            "Aerobic respiration",
                            "Anaerobic respiration",
                            "Photosynthesis",
                            "Transpiration"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "In the process of excretion, the term 'urine' refers to:",
                        options: [
                            "Blood without cells",
                            "Water with dissolved salts",
                            "The filtrate containing urea, salts, and excess water",
                            "Undigested food"
                        ],
                        correctAnswer: 2
                    }
                ]
            },
            "ch10": {
                title: "Chapter 10: Light - Reflection and Refraction",
                questions: [
                    {
                        question: "A ray of light strikes a plane mirror at an angle of incidence of 40°. The angle of reflection is:",
                        options: ["30°", "40°", "50°", "90°"],
                        correctAnswer: 1
                    },
                    {
                        question: "The image formed by a concave mirror is virtual, erect, and magnified when the object is placed:",
                        options: [
                            "At the focus",
                            "Between the pole and focus",
                            "At the centre of curvature",
                            "Beyond the centre of curvature"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "The refractive index of diamond is 2.42. This means:",
                        options: [
                            "Speed of light in diamond is 2.42 times that in vacuum.",
                            "Speed of light in vacuum is 2.42 times that in diamond.",
                            "Diamond is 2.42 times denser than water.",
                            "Angle of incidence in diamond is 2.42 times the angle of refraction."
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "A student obtains a blurred image of an object on a screen. To get a sharp image, he must move the lens:",
                        options: [
                            "Towards the screen",
                            "Away from the screen",
                            "Either towards or away from the screen depending on the position",
                            "Nothing can be done"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The power of a lens is -2.0 D. Its focal length is:",
                        options: [
                            "+50 cm",
                            "-50 cm",
                            "+2 m",
                            "-0.5 m"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "In which of the following, the final image is always erect and diminished?",
                        options: [
                            "Simple microscope",
                            "Compound microscope",
                            "Astronomical telescope",
                            "Terrestrial telescope"
                        ],
                        correctAnswer: 3
                    },
                    {
                        question: "The phenomenon of splitting of white light into its constituent colours is called:",
                        options: [
                            "Reflection",
                            "Refraction",
                            "Dispersion",
                            "Scattering"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The SI unit of power of a lens is:",
                        options: [
                            "Metre",
                            "Dioptre",
                            "Candela",
                            "Joule"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "A convex lens forms a real and inverted image of an object. The object is placed:",
                        options: [
                            "Between F and 2F",
                            "At F",
                            "Between F and optical centre",
                            "Beyond 2F"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "The rearview mirror in a car is usually a:",
                        options: [
                            "Concave mirror",
                            "Convex mirror",
                            "Plane mirror",
                            "Cylindrical mirror"
                        ],
                        correctAnswer: 1
                    }
                ]
            },
            "ch12": {
                title: "Chapter 12: Electricity",
                questions: [
                    {
                        question: "The SI unit of electric current is:",
                        options: [
                            "Volt",
                            "Ohm",
                            "Ampere",
                            "Coulomb"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "Two resistors, R1 and R2, are connected in series. Their equivalent resistance is:",
                        options: [
                            "R1 + R2",
                            "1/R1 + 1/R2",
                            "R1R2/(R1+R2)",
                            "(R1+R2)/R1R2"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "The heating element of an electric heater is made of:",
                        options: [
                            "Copper",
                            "Tungsten",
                            "Nichrome",
                            "Aluminum"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "According to Ohm's law:",
                        options: [
                            "V ∝ I",
                            "V ∝ 1/I",
                            "I ∝ R",
                            "R ∝ 1/V"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "The commercial unit of electrical energy is:",
                        options: [
                            "Watt",
                            "Kilowatt-hour (kWh)",
                            "Joule",
                            "Kilowatt"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "The rate at which electric energy is consumed is called:",
                 options: [
                            "Electric power",
                            "Electric current",
                            "Electric potential",
                            "Electrical resistance"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "A wire of resistance R is cut into three equal parts. These parts are then connected in parallel. The equivalent resistance is:",
                        options: [
                            "R/9",
                            "R/3",
                            "R",
                            "3R"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "The filament of an electric bulb is made of tungsten because it has:",
                        options: [
                            "Low melting point",
                            "High resistivity and high melting point",
                            "Low resistivity",
                            "High malleability"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "In a household electric circuit, appliances are connected in:",
                        options: [
                            "Series to have the same current",
                            "Parallel to have the same potential difference",
                            "Series to save wire",
                            "Parallel to reduce resistance"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "The purpose of a fuse in an electrical circuit is to:",
                        options: [
                            "Increase current",
                            "Prevent overheating and fires",
                            "Reduce power consumption",
                            "Increase voltage"
                        ],
                        correctAnswer: 1
                    }
                ]
            },
            "ch13": {
                title: "Chapter 13: Magnetic Effects of Electric Current",
                questions: [
                    {
                        question: "The magnetic field lines around a current-carrying straight conductor are in the form of:",
                        options: [
                            "Straight lines radial from the conductor",
                            "Concentric circles",
                            "Elliptical paths",
                            "Parallel lines"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "The device used to convert mechanical energy into electrical energy is called a:",
                        options: [
                            "Galvanometer",
                            "Motor",
                            "Generator",
                            "Ammeter"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The strength of the magnetic field inside a long solenoid carrying current:",
                        options: [
                            "Is zero",
                            "Decreases from center to ends",
                            "Is uniform at all points",
                            "Increases from center to ends"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The phenomenon of electromagnetic induction was discovered by:",
                        options: [
                            "Oersted",
                            "Faraday",
                            "Ohm",
                            "Maxwell"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "In an electric motor, the split ring acts as a:",
                        options: [
                            "Switch",
                            "Commutator",
                            "Brush",
                            "Fuse"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "The direction of force on a current-carrying conductor in a magnetic field is given by:",
                        options: [
                            "Ohm's Law",
                            "Fleming's Left-Hand Rule",
                            "Fleming's Right-Hand Rule",
                            "Maxwell's Corkscrew Rule"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "Which of the following is not a part of an AC generator?",
                        options: [
                            "Armature",
                            "Commutator",
                            "Slip rings",
                            "Field magnet"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "The frequency of AC (Alternating Current) used in household supply in India is:",
                        options: [
                            "0 Hz",
                            "50 Hz",
                            "60 Hz",
                            "100 Hz"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "A current-carrying conductor experiences a force when placed in a magnetic field because:",
                        options: [
                            "It gets charged",
                            "Its temperature increases",
                            "A magnetic field interacts with the field due to the current",
                            "It becomes an electromagnet"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The role of the carbon brushes in an electric motor is to:",
                        options: [
                            "Rotate the axle",
                            "Supply current to the commutator",
                            "Change the direction of current in the coil",
                            "Both (b) and (c)"
                        ],
                        correctAnswer: 3
                    }
                ]
            },
            "chExtra": {
                title: "Extra: Heredity & Environment",
                questions: [
                    {
                        question: "Which of the following is an example of acquired trait?",
                        options: [
                            "Eye color",
                            "Blood group",
                            "Knowledge gained through study",
                            "Height of a person"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The process by which characteristics are transmitted from parents to offspring is called:",
                        options: [
                            "Evolution",
                            "Heredity",
                            "Variation",
                            "Natural selection"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "Which of the following is a biodegradable waste?",
                        options: [
                            "Plastic bag",
                            "Glass bottle",
                            "Vegetable peels",
                            "Aluminum can"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The ozone layer protects us from:",
                        options: [
                            "Infrared rays",
                            "Ultraviolet rays",
                            "Visible light",
                            "Gamma rays"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "Which of the following is a non-renewable resource?",
                        options: [
                            "Solar energy",
                            "Wind energy",
                            "Coal",
                            "Hydro energy"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The phenomenon of 'like begets like' is explained by:",
                        options: [
                            "Evolution",
                            "Heredity",
                            "Variation",
                            "Adaptation"
                        ],
                        correctAnswer: 1
                    },
                    {
                        question: "Which of these is a method of waste disposal?",
                        options: [
                            "Landfills",
                            "Incineration",
                            "Recycling",
                            "All of the above"
                        ],
                        correctAnswer: 3
                    },
                    {
                        question: "The first trophic level in a food chain is always occupied by:",
                        options: [
                            "Herbivores",
                            "Carnivores",
                            "Producers",
                            "Decomposers"
                        ],
                        correctAnswer: 2
                    },
                    {
                        question: "The term used for the remains of dead plants and animals is:",
                        options: [
                            "Fossils",
                            "Sediments",
                            "Humus",
                            "Minerals"
                        ],
                        correctAnswer: 0
                    },
                    {
                        question: "Which of the following helps in reducing air pollution?",
                        options: [
                            "Using public transport",
                            "Using CNG instead of petrol",
                            "Planting more trees",
                            "All of the above"
                        ],
                        correctAnswer: 3
                    }
                ]
            }
        };

        // Chapters information
        const chapters = [
            { id: "ch1", name: "Chemical Reactions", icon: "fa-flask", color: "#FF6B6B" },
            { id: "ch2", name: "Acids, Bases & Salts", icon: "fa-vial", color: "#4ECDC4" },
            { id: "ch6", name: "Life Processes", icon: "fa-heartbeat", color: "#45B7D1" },
            { id: "ch10", name: "Light", icon: "fa-lightbulb", color: "#FFEAA7" },
            { id: "ch12", name: "Electricity", icon: "fa-bolt", color: "#FDCB6E" },
            { id: "ch13", name: "Magnetic Effects", icon: "fa-magnet", color: "#A29BFE" },
            { id: "chExtra", name: "Extra Topics", icon: "fa-star", color: "#FF7675" }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeChaptersGrid();
            createMCQPages();
            
            // Add smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        });

        // Create chapters grid
        function initializeChaptersGrid() {
            const chaptersGrid = document.getElementById('chaptersGrid');
            
            chapters.forEach(chapter => {
                const chapterBtn = document.createElement('button');
                chapterBtn.className = 'chapter-btn';
                chapterBtn.setAttribute('data-chapter', chapter.id);
                chapterBtn.innerHTML = `
                    <i class="fas ${chapter.icon}"></i>
                    <span>${chapter.name}</span>
                    <small>10 MCQs</small>
                `;
                
                chapterBtn.style.background = `linear-gradient(135deg, ${chapter.color}, ${darkenColor(chapter.color, 20)})`;
                
                chapterBtn.addEventListener('click', () => {
                    openChapter(chapter.id);
                });
                
                chaptersGrid.appendChild(chapterBtn);
            });
        }

        // Create MCQ pages for all chapters
        function createMCQPages() {
            const container = document.getElementById('mcqPagesContainer');
            
            Object.keys(mcqData).forEach(chapterId => {
                const chapter = mcqData[chapterId];
                
                const mcqPage = document.createElement('div');
                mcqPage.className = 'mcq-page';
                mcqPage.id = `page-${chapterId}`;
                
                // Create header
                mcqPage.innerHTML = `
                    <div class="mcq-header">
                        <button class="back-btn" onclick="goBackToMenu()">
                            <i class="fas fa-arrow-left"></i> Back to Chapters
                        </button>
                        <h2 class="chapter-title">${chapter.title}</h2>
                        <div class="progress-info">
                            <div>Progress: <span id="progress-${chapterId}">0%</span></div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill-${chapterId}"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mcq-container" id="container-${chapterId}">
                        <!-- Questions will be inserted here -->
                    </div>
                    
                    <div class="results-panel hidden" id="results-${chapterId}">
                        <div class="score-circle">
                            <div class="score-percent" id="scorePercent-${chapterId}">0%</div>
                            <div class="score-text">Score</div>
                        </div>
                        <h3>Chapter Performance</h3>
                        <div class="results-details">
                            <div class="result-stat">
                                <div class="number" id="correctCount-${chapterId}">0</div>
                                <div>Correct</div>
                            </div>
                            <div class="result-stat">
                                <div class="number" id="wrongCount-${chapterId}">0</div>
                                <div>Wrong</div>
                            </div>
                            <div class="result-stat">
                                <div class="number" id="attemptedCount-${chapterId}">0</div>
                                <div>Attempted</div>
                            </div>
                        </div>
                        <button class="back-btn" style="margin-top: 20px;" onclick="resetChapter('${chapterId}')">
                            <i class="fas fa-redo"></i> Try Again
                        </button>
                    </div>
                `;
                
                container.appendChild(mcqPage);
                
                // Create questions for this chapter
                createQuestionsForChapter(chapterId);
            });
        }

        // Create questions for a specific chapter
        function createQuestionsForChapter(chapterId) {
            const container = document.getElementById(`container-${chapterId}`);
            const chapter = mcqData[chapterId];
            
            chapter.questions.forEach((question, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'mcq-item';
                questionElement.id = `q-${chapterId}-${index}`;
                questionElement.innerHTML = `
                    <div class="question">Q${index + 1}. ${question.question}</div>
                    <div class="options-container">
                        ${question.options.map((option, optIndex) => `
                            <div class="option" data-answer="${optIndex}">
                                <input type="checkbox" id="opt-${chapterId}-${index}-${optIndex}">
                                <label for="opt-${chapterId}-${index}-${optIndex}">${option}</label>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                container.appendChild(questionElement);
                
                // Add event listeners to options
                const options = questionElement.querySelectorAll('.option');
                options.forEach(option => {
                    const checkbox = option.querySelector('input[type="checkbox"]');
                    
                    checkbox.addEventListener('change', () => {
                        // For single choice (radio behavior), uncheck other options
                        options.forEach(otherOption => {
                            if (otherOption !== option) {
                                otherOption.querySelector('input[type="checkbox"]').checked = false;
                                otherOption.classList.remove('selected');
                            }
                        });
                        
                        if (checkbox.checked) {
                            option.classList.add('selected');
                            checkAnswer(chapterId, index, parseInt(option.dataset.answer));
                        } else {
                            option.classList.remove('selected');
                        }
                        
                        updateProgress(chapterId);
                    });
                });
            });
        }

        // Check the answer for a question
        function checkAnswer(chapterId, questionIndex, selectedAnswer) {
            const question = mcqData[chapterId].questions[questionIndex];
            const questionElement = document.getElementById(`q-${chapterId}-${questionIndex}`);
            const options = questionElement.querySelectorAll('.option');
            
            // Reset all options styling
            options.forEach(option => {
                option.classList.remove('correct-answer', 'wrong-answer');
            });
            
            // Mark correct answer in green
            options[question.correctAnswer].classList.add('correct-answer');
            
            // Mark selected answer if wrong
 if (selectedAnswer !== question.correctAnswer) {
                options[selectedAnswer].classList.add('wrong-answer');
                questionElement.classList.add('wrong');
            } else {
                questionElement.classList.add('correct');
            }
            
            // Disable all checkboxes after answering
            options.forEach(option => {
                option.querySelector('input[type="checkbox"]').disabled = true;
            });
        }

        // Update progress for a chapter
        function updateProgress(chapterId) {
            const chapter = mcqData[chapterId];
            let answeredCount = 0;
            
            chapter.questions.forEach((question, index) => {
                const questionElement = document.getElementById(`q-${chapterId}-${index}`);
                const options = questionElement.querySelectorAll('input[type="checkbox"]:checked');
                if (options.length > 0) {
                    answeredCount++;
                }
            });
            
            const progress = (answeredCount / chapter.questions.length) * 100;
            document.getElementById(`progress-${chapterId}`).textContent = `${Math.round(progress)}%`;
            document.getElementById(`progressFill-${chapterId}`).style.width = `${progress}%`;
            
            // Show results if all questions answered
            if (answeredCount === chapter.questions.length) {
                showResults(chapterId);
            }
        }

        // Show results for a chapter
        function showResults(chapterId) {
            const chapter = mcqData[chapterId];
            let correctCount = 0;
            let wrongCount = 0;
            
            chapter.questions.forEach((question, index) => {
                const questionElement = document.getElementById(`q-${chapterId}-${index}`);
                if (questionElement.classList.contains('correct')) {
                    correctCount++;
                } else if (questionElement.classList.contains('wrong')) {
                    wrongCount++;
                }
            });
            
            const score = Math.round((correctCount / chapter.questions.length) * 100);
            
            document.getElementById(`scorePercent-${chapterId}`).textContent = `${score}%`;
            document.getElementById(`correctCount-${chapterId}`).textContent = correctCount;
            document.getElementById(`wrongCount-${chapterId}`).textContent = wrongCount;
            document.getElementById(`attemptedCount-${chapterId}`).textContent = chapter.questions.length;
            
            document.getElementById(`results-${chapterId}`).classList.remove('hidden');
            
            // Scroll to results
            document.getElementById(`results-${chapterId}`).scrollIntoView({ behavior: 'smooth' });
        }

        // Open a specific chapter
        function openChapter(chapterId) {
            // Hide chapters grid
            document.getElementById('chaptersGrid').style.display = 'none';
            
            // Show the selected chapter page
            document.getElementById(`page-${chapterId}`).classList.add('active');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Go back to main menu
        function goBackToMenu() {
            // Hide all mcq pages
            document.querySelectorAll('.mcq-page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show chapters grid
            document.getElementById('chaptersGrid').style.display = 'grid';
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Reset a chapter (try again)
        function resetChapter(chapterId) {
            const chapter = mcqData[chapterId];
            
            // Reset all questions
            chapter.questions.forEach((question, index) => {
                const questionElement = document.getElementById(`q-${chapterId}-${index}`);
                questionElement.classList.remove('correct', 'wrong');
                
                const options = questionElement.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct-answer', 'wrong-answer');
                    const checkbox = option.querySelector('input[type="checkbox"]');
                    checkbox.checked = false;
                    checkbox.disabled = false;
                });
            });
            
            // Hide results
            document.getElementById(`results-${chapterId}`).classList.add('hidden');
            
            // Reset progress
            document.getElementById(`progress-${chapterId}`).textContent = '0%';
            document.getElementById(`progressFill-${chapterId}`).style.width = '0%';
            
            // Scroll to top of chapter
            document.getElementById(`container-${chapterId}`).scrollIntoView({ behavior: 'smooth' });
        }

        // Utility function to darken color
        function darkenColor(color, percent) {
            let num = parseInt(color.replace("#", ""), 16),
                amt = Math.round(2.55 * percent),
                R = (num >> 16) - amt,
                G = (num >> 8 & 0x00FF) - amt,
                B = (num & 0x0000FF) - amt;
            
            return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }